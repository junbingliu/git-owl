(function(b){var a=function(d){var c=this;c.ajaxType="post";c.args={};c.loadAfterEvent=undefined;if(d){c.paginationId=d.paginationId?d.paginationId:undefined;c.data_container=d.data_container?d.data_container:undefined;c.pagination_container=d.pagination_container?d.pagination_container:undefined;c.pagination_params=d.pagination_params?d.pagination_params:undefined;c.ajaxUrl=d.ajaxUrl?d.ajaxUrl:undefined}c.init=function(){if(!c.pagination_params){throw"pagination_params is undefined"}var e=b(c.pagination_params);if(!e){throw"the div of pagination_params is not exist"}c.isDisplayHomePage=false;c.enableToPage=false;c.hideIfEmpty=false;c.hideTotal=false;c.recordType=e.attr("recordType");c.totalPages=parseInt(e.attr("totalPages"));c.currentPage=parseInt(e.attr("currentPage"));c.totalRecords=parseInt(e.attr("totalRecords"));c.displayNum=6;c.pageLimit=10;if(e.attr("displayNum")){c.displayNum=parseInt(e.attr("displayNum"))}if(e.attr("pageLimit")){c.pageLimit=parseInt(e.attr("pageLimit"))}if(e.attr("enableToPage")&&e.attr("enableToPage")=="true"){c.enableToPage=true}if(e.attr("hideIfEmpty")&&e.attr("hideIfEmpty")=="true"){c.hideIfEmpty=true}if(e.attr("hideTotal")&&e.attr("hideTotal")=="true"){c.hideTotal=true}};c.showPageHtml=function(){c.init();if(!c.pagination_container){throw"pagination_container is undefined"}var g=b(c.pagination_container);if(!g){throw"the div of pagination_container is not exist"}var n=b(c.data_container).attr("id");var o="javascript:void(0);";if(n){o="#"+n}var j="do_click";if(c.paginationId){j=c.paginationId+"_"+j}if(c.hideIfEmpty&&c.totalRecords==0){g.html("");return}var t="";t+="<ul>";if(c.currentPage>1){if(c.isDisplayHomePage){t+="<li><a href='"+o+"' class='"+j+"' data-a='1'>首页</a></li>"}}if(c.currentPage>1){t+="<li><a href='"+o+"' class='"+j+"' data-a='"+(c.currentPage-1)+"'>上一页</a></li>"}else{t+="<li class='disabled'><a title='目前已是第一页'>上一页</a></li>"}t+="</ul>";t+="&nbsp;<ul>";if(c.displayNum==0){t+="<li class='active'><a>"+c.currentPage+"</a>/"+c.totalPages+"</li>"}else{var k=c.displayNum/2-1;var l=c.displayNum/2+1;var p=1;var r=1;if(c.currentPage<l){p=1}else{p=c.currentPage-k}if(c.currentPage+k>c.totalPages){r=c.totalPages}else{r=c.currentPage+k}if(c.currentPage+k<c.displayNum){r=c.displayNum}if(r-c.currentPage<k){p=c.totalPages-(c.displayNum-1);if(p!=1){p+=1}}if(p<=0){p=1}if(r>c.totalPages){r=c.totalPages}if(c.currentPage>=l&&p!=1){t+="<li><a href='"+o+"' class='"+j+"'>1</a></li>";if(c.currentPage!=l){t+="<li class='disabled'><a>...</a></li>"}}for(var m=p;m<=r;m++){var s="";if(m!=c.currentPage){s="<li><a href='"+o+"' class='"+j+"' data-a='"+m+"'>"+m+"</a></li>"}else{s="<li class='active'><a>"+m+"</a></li>"}t+=s}}t+="</ul>";t+="&nbsp;<ul>";if(c.currentPage<c.totalPages){t+="<li><a href='"+o+"' class='"+j+"' data-a='"+(c.currentPage+1)+"'>下一页</a></li>"}else{t+="<li class='disabled'><a title='目前已是最后一页'>下一页</a></li>"}t+="</ul>";t+="&nbsp;<ul>";if(c.enableToPage&&c.totalPages>c.displayNum){t+="<li class='disabled'><a>第</a></li>";t+="<li><input type='text' class='input toPage'></li>";t+="<li class='disabled'><a>页</a></li>";t+="<li><a href='"+o+"' class='toPage_submit'>确定</a></li>"}t+="</ul>";if(!c.hideTotal){t+="&nbsp;<ul>";if(c.totalRecords==0){t+="<li class='disabled'><a>共 "+c.totalRecords;if(c.recordType!=null&&c.recordType.length>0){t+=" 个"+c.recordType}t+="</a></li>"}else{var h=(c.currentPage-1)*c.pageLimit+1;var q;if(h+c.pageLimit>c.totalRecords){q=c.totalRecords}else{q=h+c.pageLimit-1}t+="<li class='disabled'><a>显示 "+h+" - "+q+" / 共 "+c.totalRecords;if(c.recordType!=null&&c.recordType.length>0){t+=" 个"+c.recordType}t+="</a></li>"}t+="</ul>"}var f=b(".toPage_submit",g);f.die();f.live("click",function(){var u=b(".toPage",g);if(!u){alert("请输入要跳转到的页面!");return}var v=u.val();v=b.trim(v);if(v==""){alert("请输入要跳转到的页面!");return}var i=new RegExp("^[1-9][0-9]*$");if(!i.test(v)){alert("要跳转到的页面必须为非0的数字!");return}if(v>c.totalPages){alert("最大跳转页数为："+c.totalPages+"，请重新输入!");return}c.goPage(v)});var e=b("."+j);e.die();e.live("click",function(){var i=b(this).attr("data-a");c.goPage(i)});g.html("");g.append(t)};c.load=function(f){c.args=(f==null||f==undefined)?{}:f;var e={page:1};if(c.args){b.extend(e,c.args)}c.doAjax(e)};c.goPage=function(f){var e={page:f};b.extend(e,c.args);c.doAjax(e)};c.doAjax=function(e){if(!c.ajaxUrl){throw"ajaxUrl is undefined"}if(!c.data_container){throw"data_container is undefined"}b.ajax({url:c.ajaxUrl,type:c.ajaxType,data:e,dataType:"html",success:function(g){var f=b(c.data_container);f.html("");f.append(g);c.showPageHtml();if(c.loadAfterEvent){c.loadAfterEvent.fireEvent()}}})}};b.IsoneAjaxPagination=a})(window.jQuery);