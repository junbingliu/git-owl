(function(b){var a=function(u){this.elem=b(u);var n=this;var h=false;var r=false;var x=this.elem.attr("recordType");var g=parseInt(this.elem.attr("totalPages"));var d=parseInt(this.elem.attr("currentPage"));var w=parseInt(this.elem.attr("totalRecords"));var q=6;var l=10;if(this.elem.attr("displayNum")){q=parseInt(this.elem.attr("displayNum"))}if(this.elem.attr("pageLimit")){l=parseInt(this.elem.attr("pageLimit"))}if(this.elem.attr("enableToPage")&&this.elem.attr("enableToPage")=="true"){r=true}this.getCleanUrl=function(){var e=document.location.href;var i=new RegExp("page=([^&?]*)","g");var y=((e.match(i))?(e.match(i)[0]):null);if(y!=null){return e.replace(y,"")}return e};var m=this.getCleanUrl();this.getCompleteUrl=function(e,i){if(e.indexOf("?")>0){var y=e.length;if(e.lastIndexOf("?")==(y-1)||e.lastIndexOf("&")==(y-1)){return e+"page="+i}return e+"&page="+i}else{return e+"?page="+i}};var p="";p+="<ul>";if(d>1){if(h){p+="<li><a href='"+this.getCompleteUrl(m,1)+"'>首页</a></li>"}}if(d>1){p+="<li><a href='"+this.getCompleteUrl(m,d-1)+"'>上一页</a></li>"}else{p+="<li class='disabled'><a title='目前已是第一页'>上一页</a></li>"}p+="</ul>";p+="&nbsp;<ul>";if(q==0){p+="<li class='active'><a href='#'>"+d+"</a>/"+g+"</li>"}else{var t=q/2-1;var j=q/2+1;var o=1;var c=1;if(d<j){o=1}else{o=d-t}if(d+t>g){c=g}else{c=d+t}if(d+t<q){c=q}if(c-d<t){o=g-(q-1);if(o!=1){o+=1}}if(o<=0){o=1}if(c>g){c=g}if(d>=j&&o!=1){p+="<li><a href='"+this.getCompleteUrl(m,1)+"'>1</a></li>";if(d!=j){p+="<li class='disabled'><a href='#'>...</a></li>"}}for(var s=o;s<=c;s++){var v="";if(s!=d){v="<li><a href='"+this.getCompleteUrl(m,s)+"'>"+s+"</a></li>"}else{v="<li class='active'><a href='#'>"+s+"</a></li>"}p+=v}}p+="</ul>";p+="&nbsp;<ul>";if(d<g){p+="<li><a href='"+this.getCompleteUrl(m,d+1)+"'>下一页</a></li>"}else{p+="<li class='disabled'><a title='目前已是最后一页'>下一页</a></li>"}p+="</ul>";p+="&nbsp;<ul>";if(r&&g>q){p+="<li class='disabled'><a href='#'>跳转到第</a></li>";p+="<li><input type='text' class='input toPage'></li>";p+="<li class='disabled'><a href='#'>页</a></li>";p+="<li><a href='javascript:void(0);' class='toPage_submit'>确定</a></li>"}p+="</ul>";p+="&nbsp;<ul>";if(w==0){p+="<li class='disabled'><a href='#'>共 "+w;if(x!=null&&x.length>0){p+=" 个"+x}p+="</a></li>"}else{var f=(d-1)*l+1;var k;if(f+l>w){k=w}else{k=f+l-1}p+="<li class='disabled'><a href='#'>显示 "+f+" - "+k+" / 共 "+w;if(x!=null&&x.length>0){p+=" 个"+x}p+="</a></li>"}p+="</ul>";this.elem.append(p);b(".toPage_submit",n.elem).click(function(){var i=b(".toPage",n.elem);if(!i){alert("请输入要跳转到的页面!");return}var y=i.val();var e=new RegExp("^[0-9]*$");if(!e.test(y)){alert("要跳转到的页面必须为数字!");return}if(y>g){alert("最大跳转页数为："+g+"，请重新输入!");return}window.location.href=n.getCompleteUrl(m,i.val())})};b.IsonePagination=a})(window.jQuery);