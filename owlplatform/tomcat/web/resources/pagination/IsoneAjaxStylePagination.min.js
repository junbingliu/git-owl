(function(a){var b=function(d){var c=this;c.ajaxType="post";c.args={};c.loadAfterEvent=undefined;if(d){c.data_container=d.data_container?d.data_container:undefined;c.pagination_container=d.pagination_container?d.pagination_container:undefined;c.pagination_params=d.pagination_params?d.pagination_params:undefined;c.ajaxUrl=d.ajaxUrl?d.ajaxUrl:undefined}c.init=function(){if(!c.pagination_params){throw"pagination_params is undefined"}var e=a(c.pagination_params);if(e.length===0){throw"the div of pagination_params is not exist"}c.isDisplayHomePage=false;c.enableToPage=false;c.hideIfEmpty=false;c.hideTotal=false;c.recordType=e.attr("recordType");c.totalPages=parseInt(e.attr("totalPages"));c.currentPage=parseInt(e.attr("currentPage"));c.totalRecords=parseInt(e.attr("totalRecords"));c.displayNum=6;c.pageLimit=10;if(e.attr("displayNum")){c.displayNum=parseInt(e.attr("displayNum"))}if(e.attr("pageLimit")){c.pageLimit=parseInt(e.attr("pageLimit"))}if(e.attr("enableToPage")&&e.attr("enableToPage")=="true"){c.enableToPage=true}if(e.attr("hideIfEmpty")&&e.attr("hideIfEmpty")=="true"){c.hideIfEmpty=true}if(e.attr("hideTotal")&&e.attr("hideTotal")=="true"){c.hideTotal=true}};c.showPageHtml=function(){c.init();if(!c.pagination_container){throw"pagination_container is undefined"}var g=a(c.pagination_container);if(g.length==0){throw"the div of pagination_container is not exist"}var m=a(c.data_container).attr("id");var n="javascript:void(0);";if(m){n="#"+m}if(c.hideIfEmpty&&c.totalRecords==0){g.html("");return}var s="";s+="<ul>";if(c.currentPage>1){if(c.isDisplayHomePage){s+="<li><a href='"+n+"' class='homePage do_click' data-a='1'></a></li>"}}if(c.currentPage>1){s+="<li><a title='上一页' href='"+n+"' class='upPage do_click' data-a='"+(c.currentPage-1)+"'></a></li>"}else{s+="<li><a title='目前已是第一页' class='upPage'></a></li>"}if(c.displayNum==0){s+="<li class='active'><a>"+c.currentPage+"</a>/"+c.totalPages+"</li>"}else{var j=c.displayNum/2-1;var k=c.displayNum/2+1;var o=1;var q=1;if(c.currentPage<k){o=1}else{o=c.currentPage-j}if(c.currentPage+j>c.totalPages){q=c.totalPages}else{q=c.currentPage+j}if(c.currentPage+j<c.displayNum){q=c.displayNum}if(q-c.currentPage<j){o=c.totalPages-(c.displayNum-1);if(o!=1){o+=1}}if(o<=0){o=1}if(q>c.totalPages){q=c.totalPages}if(c.currentPage>=k&&o!=1){s+="<li><a href='"+n+"' class='everyPage do_click'>1</a></li>";if(c.currentPage!=k){s+="<li><span>...</span></li>"}}for(var l=o;l<=q;l++){var r="";if(l!=c.currentPage){r="<li><a href='"+n+"' class='everyPage do_click' data-a='"+l+"'>"+l+"</a></li>"}else{r="<li><a class='nowPage'>"+l+"</a></li>"}s+=r}}if(c.currentPage<c.totalPages){s+="<li><a href='"+n+"' class='downPage do_click' data-a='"+(c.currentPage+1)+"'></a></li>"}else{s+="<li><a title='目前已是最后一页' class='downPage'></a></li>"}if(c.enableToPage&&c.totalPages>c.displayNum){s+="<li><span>第</span></li>";s+="<li><input type='text' class='input toPage'></li>";s+="<li><span>页</span></li>";s+="<li><a href='"+n+"' class='toPage_submit'>确定</a></li>"}if(!c.hideTotal){if(c.totalRecords==0){s+="<li><span>共 "+c.totalRecords;if(c.recordType!=null&&c.recordType.length>0){s+=" 个"+c.recordType}s+="</span></li>"}else{var h=(c.currentPage-1)*c.pageLimit+1;var p;if(h+c.pageLimit>c.totalRecords){p=c.totalRecords}else{p=h+c.pageLimit-1}s+="<li><span>显示 "+h+" - "+p+" / 共 "+c.totalRecords;if(c.recordType!=null&&c.recordType.length>0){s+=" 个"+c.recordType}s+="</span></li>"}}s+="</ul>";var f=a(".toPage_submit",g);f.die();f.live("click",function(){var t=a(".toPage",g);if(!t){alert("请输入要跳转到的页面!");return}var u=t.val();u=a.trim(u);if(u==""){alert("请输入要跳转到的页面!");return}var i=new RegExp("^[1-9][0-9]*$");if(!i.test(u)){alert("要跳转到的页面必须为非0的数字!");return}if(u>c.totalPages){alert("最大跳转页数为："+c.totalPages+"，请重新输入!");return}c.goPage(u)});var e=a(".do_click");e.die();e.live("click",function(){var i=a(this).attr("data-a");c.goPage(i)});g.html("");g.append(s)};c.load=function(f){c.args=(f==null||f==undefined)?{}:f;var e={page:1};if(c.args){a.extend(e,c.args)}c.doAjax(e)};c.goPage=function(f){var e={page:f};a.extend(e,c.args);c.doAjax(e)};c.doAjax=function(e){if(!c.ajaxUrl){throw"ajaxUrl is undefined"}if(!c.data_container){throw"data_container is undefined"}a.ajax({url:c.ajaxUrl,type:c.ajaxType,data:e,dataType:"html",success:function(g){var f=a(c.data_container);f.html("");f.append(g);c.showPageHtml();if(c.loadAfterEvent){c.loadAfterEvent.fireEvent()}}})}};a.IsoneAjaxStylePagination=b})(window.jQuery);